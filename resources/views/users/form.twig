{% extends "page.twig" %}

{% block pageTitle %}{{ user.username }}{% endblock %}

{% block breadcrumbs %}
  <div class="col-lg-10">
    <h2>{{ role.id }}</h2>
    <ol class="breadcrumb">
        <li>
            <a href="/">Dashboard</a>
        </li>        
        <li>
            <a href="/users/">All users</a>
        </li>        
        <li class="active">
            <strong>{{ user.username }}</strong>
        </li>
    </ol>
  </div>
{% endblock %}

{% block content %}

  <div class="ibox float-e-margins">
    <div class="ibox-title">
      <h5>{{ user.username }}</h5>
    </div>

    <div class="ibox-content">
      <form enctype="multipart/form-data" class="form-horizontal" action="/users/{{ user.id }}" method="post">
        {{ csrf_field()}}

        <input type="hidden" name="action" value="save" />

        <div class="tabs-container">
          <ul class="nav nav-tabs">
            <li class="active"><a data-toggle="tab" href="#tab-settings">General</a></li>
          </ul>

          <div class="tab-content">
            <div class="tab-pane tab-pane-padding active" id="tab-settings">
              <div class="form-group">
                <label class="col-sm-2 control-label">Username</label>
                <div class="col-sm-10">
                  <input name="username" id="username" type="text" class="form-control" value="{{ user.username }}">
                </div>
              </div>              

              <div class="form-group">
                <label class="col-sm-2 control-label">Password</label>
                <div class="col-sm-10">
                  <input name="password" id="password" type="password" class="form-control" value="">
                </div>
              </div>

              <div class="form-group">
                <label class="col-sm-2 control-label">User role</label>
                <div class="col-sm-10">
                  <select name="roleId" class="form-control">
                    <option value="">Not specified</option>
                    {% for role in roles %}
                      {% if role.id == user.roleId %}
                        <option selected value="{{ role.id }}">{{ role.id }}</option>
                      {% else %}
                        <option value="{{ role.id }}">{{ role.id }}</option>
                      {% endif %}
                    {% endfor %}
                  </select>
                </div>
              </div>

              <div class="form-group">
                <label class="col-sm-2 control-label">Language</label>
                <div class="col-sm-10">
                  <select name="language" class="form-control">
                    <option value="">Not specified</option>
                    {% for language, key in languages %}
                      {% if key == user.language.short %}
                        <option selected value="{{ key}}">{{ language }}</option>
                      {% else %}
                        <option value="{{ key }}">{{ language}}</option>
                      {% endif %}
                    {% endfor %}
                  </select>
                </div>
              </div>

            </div>

          </div>
        </div>

        <hr/>

        <button type="submit" name="action" value="save" class="btn btn-primary">Save user</button>
        <button type="submit" name="action" value="apply" class="btn btn-primary">Apply changes</button>
        <a href="/users/{{ user.id }}/delete" class="btn btn-default pull-right">Delete user</a>
      </form>
    </div>
  </div>

{% endblock %}
